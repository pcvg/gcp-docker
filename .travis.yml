sudo: required

services:
  - docker

env:
  - DOCKER_COMPOSE_VERSION=1.15.0

install:
  - docker-compose --version
  - docker-compose up -d
  - docker-compose ps

script:
  - docker-compose exec rb24 bash -lc "which bundle || (printf 'bundle not found! Test failed.'; exit 1)"
  - docker-compose exec rb24 bash -lc "which gcloud || (printf 'gcloud not found! Test failed.'; exit 1)"
  - docker-compose exec rb24 bash -lc "test -f $HOME/cloud_sql_proxy || (printf 'cloud_sql_proxy not found! Test failed.'; exit 1)"
